# 企微 H5 待办管理系统 - 需求文档

## 文档信息

- **项目名称**：企微 H5 待办管理系统
- **版本**：v1.0
- **文档日期**：2025-01-27
- **适用范围**：首页（今日待办）、我的待办

---

## 1. 项目概述

### 1.1 项目背景
基于 React + TypeScript + Vite 构建的移动端待办管理应用，聚焦于「首页今日待办」和「我的待办」两个核心场景，提供灵活的任务分类、优先级筛选与任务管理能力，适合企业内部的轻量级任务协同与个人时间管理。

### 1.2 核心价值
- **聚焦今日**：首页自动筛选当天到期的任务，帮助用户快速了解今日待办事项
- **全面管理**：我的待办页面以日期为单位分组展示全部任务，便于规划每日日程
- **灵活筛选**：支持按分类和优先级筛选，帮助用户聚焦关键事项
- **便捷操作**：支持快速创建、编辑、删除和完成任务

---

## 2. 功能需求

### 2.1 首页（今日待办）

#### 2.1.1 页面头部
**功能描述**：显示页面标题、日期信息和任务统计

**需求详情**：
- 显示"今日待办"标题
- 显示当前日期信息，格式：`MM月DD日 星期X`（如：`01月27日 周一`）
- 显示未完成任务数量统计，格式：`还有 X 个任务待完成`
- 右上角显示筛选按钮（过滤器图标），点击后打开筛选抽屉

**交互要求**：
- 筛选按钮点击后打开底部抽屉式筛选面板

#### 2.1.2 分类标签栏
**功能描述**：提供任务分类快速切换

**需求详情**：
- 显示分类标签：全部、工作、学习、生活
- 每个标签显示对应分类的任务数量
- 支持点击切换分类
- 当前选中的分类高亮显示

**分类定义**：
- **全部**：显示所有今日任务
- **工作**：显示分类为"工作"的今日任务
- **学习**：显示分类为"学习"的今日任务
- **生活**：显示分类为"生活"的今日任务

#### 2.1.3 任务列表
**功能描述**：展示今日待办任务列表

**需求详情**：
- 仅显示截止日期为当天的任务
- 根据选中的分类和优先级筛选条件过滤任务
- 任务按列表形式展示
- 无任务时显示空状态提示："暂无任务"、"点击右下角 + 开始创建第一个任务吧"

**筛选逻辑**：
- 同时满足分类筛选和优先级筛选条件
- 分类筛选：全部或指定分类
- 优先级筛选：全部、高优先级、中优先级、低优先级

#### 2.1.4 任务卡片
**功能描述**：展示单个任务的详细信息

**需求详情**：
- **完成状态**：左侧显示复选框图标
  - 未完成：空心圆圈图标
  - 已完成：实心圆圈图标（带填充）
  - 点击可切换完成状态
- **任务标题**：显示任务标题，已完成任务显示删除线样式
- **任务描述**：可选，有描述时显示在标题下方
- **操作按钮**：右上角显示编辑和删除按钮
  - 编辑按钮：点击后打开任务编辑弹窗
  - 删除按钮：点击后删除任务
- **标签信息**：
  - 优先级标签：格式为 `P 高/中/低`，不同优先级显示不同颜色
  - 分类标签：显示分类名称（工作/学习/生活）
  - 截止日期标签：显示截止日期（YYYY-MM-DD格式），带时钟图标

#### 2.1.5 快速创建任务
**功能描述**：通过悬浮按钮快速创建新任务

**需求详情**：
- 页面右下角显示圆形悬浮按钮（+ 图标）
- 点击后打开底部任务创建弹窗
- 弹窗默认日期为今天

#### 2.1.6 筛选功能
**功能描述**：通过底部抽屉进行任务筛选

**需求详情**：
- 点击头部筛选按钮打开底部抽屉
- 抽屉包含两个筛选维度：
  - **按分类**：全部、工作、学习、生活（显示任务数量）
  - **按优先级**：全部、高优先级、中优先级、低优先级
- 支持重置筛选条件
- 筛选条件在首页和我的待办页面之间共享

---

### 2.2 我的待办

#### 2.2.1 页面头部
**功能描述**：显示页面标题和任务统计

**需求详情**：
- 显示"我的待办"标题
- 显示任务总数和未完成任务数，格式：`共 X 个任务 · 还有 Y 个待完成`
- 右上角显示筛选按钮（过滤器图标），点击后打开筛选抽屉

#### 2.2.2 分类标签栏
**功能描述**：提供任务分类快速切换

**需求详情**：
- 显示分类标签：全部、工作、学习、生活
- 每个标签显示对应分类的任务数量（统计所有任务，不限于今日）
- 支持点击切换分类
- 当前选中的分类高亮显示

#### 2.2.3 任务分组列表
**功能描述**：按日期分组展示所有任务

**需求详情**：
- 任务按截止日期分组展示
- 每个日期组显示日期标题，格式：
  - 今天：`今天 MM月DD日 星期X`
  - 明天：`明天 MM月DD日 星期X`
  - 其他日期：`YYYY年MM月DD日 星期X`
- 无截止日期的任务归入"无日期"分组，显示在最后
- 日期组内任务按列表形式展示
- 无任务时显示空状态提示

**分组排序规则**：
- 有日期的任务按日期升序排列
- 无日期的任务放在最后

#### 2.2.4 任务卡片
**功能描述**：同首页任务卡片，展示单个任务的详细信息

**需求详情**：
- 与首页任务卡片功能一致
- 支持完成状态切换、编辑、删除操作
- 显示优先级、分类、截止日期标签

#### 2.2.5 快速创建任务
**功能描述**：通过悬浮按钮快速创建新任务

**需求详情**：
- 页面右下角显示圆形悬浮按钮（+ 图标）
- 点击后打开底部任务创建弹窗
- 弹窗默认日期为今天

#### 2.2.6 筛选功能
**功能描述**：通过底部抽屉进行任务筛选

**需求详情**：
- 与首页筛选功能一致
- 筛选条件在首页和我的待办页面之间共享

---

### 2.3 任务管理

#### 2.3.1 创建任务
**功能描述**：通过弹窗表单创建新任务

**需求详情**：
- 点击悬浮按钮打开任务创建弹窗
- 弹窗标题：`新建任务`
- 表单字段：
  - **任务标题**（必填）：文本输入框，必填验证
  - **任务描述**（可选）：多行文本输入框，最多200字，显示字数统计
  - **优先级**（必填）：单选选择器，选项：高优先级、中优先级、低优先级，默认中优先级
  - **分类**（必填）：单选选择器，选项：工作、学习、生活，默认工作
  - **截止日期**（可选）：日期选择器，默认今天，格式：`YYYY/MM/DD`
- 底部操作按钮：
  - **取消**：关闭弹窗，清空表单
  - **保存**：验证表单，保存任务，关闭弹窗

**业务规则**：
- 任务标题必填
- 截止日期未选择时，默认使用今天
- 新建任务默认状态为未完成

#### 2.3.2 编辑任务
**功能描述**：通过弹窗表单编辑已有任务

**需求详情**：
- 点击任务卡片编辑按钮打开任务编辑弹窗
- 弹窗标题：`编辑任务`
- 表单字段与创建任务一致，但预填充任务现有数据
- 底部操作按钮：取消、保存

**业务规则**：
- 表单验证规则与创建任务一致
- 保存后更新任务信息，不改变任务ID和创建时间

#### 2.3.3 删除任务
**功能描述**：删除指定任务

**需求详情**：
- 点击任务卡片删除按钮
- 直接删除任务，无需确认（可根据需要添加确认对话框）

#### 2.3.4 标记完成/未完成
**功能描述**：切换任务的完成状态

**需求详情**：
- 点击任务卡片左侧复选框图标
- 切换任务的完成状态
- 已完成任务在视觉上显示删除线样式

---

## 3. 数据模型

### 3.1 任务（Task）数据结构

```typescript
type Task = {
  id: string;                    // 任务唯一标识
  title: string;                 // 任务标题（必填）
  description?: string;          // 任务描述（可选）
  category: 'work' | 'study' | 'life';  // 任务分类
  priority: 'high' | 'medium' | 'low';   // 任务优先级
  dueDate?: string;             // 截止日期（YYYY-MM-DD格式，可选）
  completed: boolean;           // 完成状态
};
```

### 3.2 分类定义

| 分类Key | 分类名称 | 说明 |
|---------|---------|------|
| work    | 工作     | 工作任务 |
| study   | 学习     | 学习任务 |
| life    | 生活     | 生活任务 |

### 3.3 优先级定义

| 优先级Key | 优先级名称 | 说明 |
|-----------|-----------|------|
| high      | 高优先级   | 重要且紧急的任务 |
| medium    | 中优先级   | 一般重要的任务（默认） |
| low       | 低优先级   | 不紧急的任务 |

### 3.4 日期格式

- **存储格式**：`YYYY-MM-DD`（如：`2025-01-27`）
- **显示格式**：
  - 日期选择器：`YYYY/MM/DD`
  - 任务卡片标签：`YYYY-MM-DD`
  - 分组标题：`今天 MM月DD日 星期X` / `明天 MM月DD日 星期X` / `YYYY年MM月DD日 星期X`

---

## 4. 交互设计

### 4.1 页面布局

#### 首页布局
```
┌─────────────────────────┐
│ 今日待办  [筛选]        │ ← 页面头部
├─────────────────────────┤
│ [全部] [工作] [学习] [生活] │ ← 分类标签栏
├─────────────────────────┤
│                         │
│   任务卡片列表           │ ← 任务列表区域
│                         │
│                         │
└─────────────────────────┘
                    [+]
                    ↑
              悬浮创建按钮
```

#### 我的待办布局
```
┌─────────────────────────┐
│ 我的待办  [筛选]        │ ← 页面头部
├─────────────────────────┤
│ [全部] [工作] [学习] [生活] │ ← 分类标签栏
├─────────────────────────┤
│ 今天 01月27日 周一      │ ← 日期分组标题
│   ┌─────────────────┐  │
│   │  任务卡片        │  │
│   └─────────────────┘  │
│                         │
│ 明天 01月28日 周二      │
│   ┌─────────────────┐  │
│   │  任务卡片        │  │
│   └─────────────────┘  │
└─────────────────────────┘
                    [+]
                    ↑
              悬浮创建按钮
```

### 4.2 筛选抽屉

```
┌─────────────────────────┐
│ 筛选任务          [×]   │ ← 抽屉头部
├─────────────────────────┤
│ 按分类                   │
│ [全部(5)] [工作(2)] ... │ ← 分类选项（显示数量）
├─────────────────────────┤
│ 按优先级                 │
│ [全部] [高] [中] [低]   │ ← 优先级选项
├─────────────────────────┤
│    [重置筛选]            │ ← 重置按钮
└─────────────────────────┘
```

### 4.3 任务创建/编辑弹窗

```
┌─────────────────────────┐
│ 新建任务/编辑任务  [×]  │ ← 弹窗头部
├─────────────────────────┤
│ 任务标题 *               │
│ [输入框]                 │
│                         │
│ 任务描述                 │
│ [多行输入框] (0/200)    │
│                         │
│ 优先级                   │
│ [高] [中] [低]          │
│                         │
│ 分类                     │
│ [工作] [学习] [生活]    │
│                         │
│ 截止日期                 │
│ [2025/01/27] [日历图标] │
├─────────────────────────┤
│ [取消]        [保存]    │ ← 底部按钮
└─────────────────────────┘
```

### 4.4 任务卡片

```
┌─────────────────────────┐
│ [○] 任务标题      [✎] [×]│ ← 复选框、标题、操作按钮
│     任务描述（可选）     │
│     [P 高] [工作] [📅日期]│ ← 标签区域
└─────────────────────────┘
```

---

## 5. 业务规则

### 5.1 任务筛选规则

#### 首页筛选
- 仅显示截止日期为当天的任务
- 同时应用分类筛选和优先级筛选
- 筛选条件在页面切换时保持

#### 我的待办筛选
- 显示所有任务（不限日期）
- 先按优先级筛选，再按分类筛选（在组件内部）
- 筛选条件在页面切换时保持

### 5.2 任务分组规则

- 按截止日期分组
- 无截止日期的任务归入"无日期"分组
- 日期组按日期升序排列
- "无日期"分组放在最后

### 5.3 日期处理规则

- 日期存储格式：`YYYY-MM-DD`
- 日期比较基于日期字符串，不考虑时间
- 今天日期计算基于系统当前日期
- 日期选择器默认值为今天

### 5.4 任务状态规则

- 新建任务默认状态：未完成
- 完成状态可通过点击复选框切换
- 已完成任务在视觉上显示删除线
- 已完成任务仍可编辑和删除

---

## 6. 异常处理

### 6.1 空状态处理

- **无任务时**：显示空状态提示
  - 标题："暂无任务"
  - 描述："点击右下角 + 开始创建第一个任务吧"

### 6.2 表单验证

- **任务标题**：必填，未填写时显示错误提示："请输入任务标题"
- **其他字段**：可选，无验证要求

### 6.3 数据持久化

- 任务数据存储在 IndexedDB 中
- 页面刷新后数据保持
- 支持离线使用

---

## 7. 性能要求

### 7.1 响应时间
- 页面加载时间：< 2秒
- 任务操作响应时间：< 500ms
- 筛选切换响应时间：< 300ms

### 7.2 数据量
- 支持单用户管理最多 1000 个任务
- 任务列表渲染优化，支持虚拟滚动（如需要）

---

## 8. 兼容性要求

### 8.1 浏览器支持
- 支持现代移动浏览器（Chrome、Safari、微信内置浏览器等）
- 支持 IndexedDB 的浏览器

### 8.2 设备支持
- 移动端优先设计
- 支持响应式布局
- 适配不同屏幕尺寸

---

## 9. 后续规划

### 9.1 功能扩展
- 接入真实后端接口，实现任务的持久化存储与多端同步
- 扩展提醒能力，如即将到期通知、关键词搜索
- 打通「我的消息」与推送体系，实现更全面的逾期提醒

### 9.2 体验优化
- 添加任务搜索功能
- 支持任务排序（按优先级、日期等）
- 添加任务统计图表

---

## 10. 附录

### 10.1 术语表

| 术语 | 说明 |
|------|------|
| 今日待办 | 截止日期为当天的任务 |
| 我的待办 | 所有任务列表 |
| 分类 | 任务的类别（工作/学习/生活） |
| 优先级 | 任务的重要程度（高/中/低） |
| 截止日期 | 任务需要完成的日期 |

### 10.2 参考文档
- 项目 README.md
- 组件重构总结.md
- IndexedDB集成说明.md

---

**文档结束**

